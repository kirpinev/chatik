!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){t.exports=n(12)},function(t,e,n){var r=n(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(11),o=n(8);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){function n(t,e,n,r,o,a,s){try{var i=t[a](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,a){var s=t.apply(e,r);function i(t){n(s,o,a,i,c,"next",t)}function c(t){n(s,o,a,i,c,"throw",t)}i(void 0)}))}}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),s=new x(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return R()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var i=b(s,n);if(i){if(i===l)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,s),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function p(){}function f(){}function h(){}var d={};d[o]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(S([])));m&&m!==e&&n.call(m,o)&&(d=m);var y=h.prototype=p.prototype=Object.create(d);function _(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var r;this._invoke=function(o,a){function s(){return new e((function(r,s){!function r(o,a,s,i){var c=u(t[o],t,a);if("throw"!==c.type){var l=c.arg,p=l.value;return p&&"object"==typeof p&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){r("next",t,s,i)}),(function(t){r("throw",t,s,i)})):e.resolve(p).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,i)}))}i(c.arg)}(o,a,r,s)}))}return r=r?r.then(s,s):s()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:void 0,done:!0}}return f.prototype=y.constructor=h,h.constructor=f,f.displayName=i(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,i(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},_(g.prototype),g.prototype[a]=function(){return this},t.AsyncIterator=g,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var s=new g(c(e,n,r,o),a);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},_(y),i(y,s,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var i=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(i&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";n.r(e);n(9);var r=n(0),o=n.n(r),a=n(1),s=n.n(a),i=n(6),c=n.n(i),u=function(){function t(){o()(this,t),c()(this,"listeners",void 0),this.listeners={}}return s()(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){if(!this.listeners[t])throw new Error("Нет события: ".concat(t));this.listeners[t]=this.listeners[t].filter((function(t){return t!==e}))}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!this.listeners[t])throw new Error("Нет события: ".concat(t));this.listeners[t].forEach((function(t){t.apply(void 0,n)}))}}]),t}(),l={ru:{emptyInput:"Это обязательное поле",outOfRange:"Должно быть от 8 до 30 символов",email:"Неправильный формат email",tel:"Неправильный формат телефона",alreadyExists:"Такой пользователь уже существует",correctInput:"",password:"Должно быть от 8 до 30 символов",text:"Должно быть от 8 до 30 символов"}},p="init",f="flow:component-did-mount",h="flow:component-did-update",d="flow:render",v={reg:"/reg",auth:"/auth",chat:"/chat",notFound:"/not-found",userInfo:"/user-info",error:"/error",pass:"/pass",ava:"/ava",newChat:"/new-chat",chatAvatar:"/chat-avatar",chatUsers:"/chat-users",chatInfo:"/chat-info",userInfoFromChat:"/user-info-from-chat"},m=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,t),c()(this,"_element",null),c()(this,"_meta",null),c()(this,"eventBus",void 0),c()(this,"data",void 0),c()(this,"setProps",(function(t){t&&Object.assign(e.data,t)})),this._meta={tagName:n,data:r},this.data=this._makePropsProxy(r),this.eventBus=new u,this._registerEvents(this.eventBus),this.eventBus.emit(p)}return s()(t,[{key:"_registerEvents",value:function(t){t.on(p,this.init.bind(this)),t.on(f,this._componentDidMount.bind(this)),t.on(h,this._componentDidUpdate.bind(this)),t.on(d,this._render.bind(this))}},{key:"_createResources",value:function(){var t=this._meta.tagName;this._element=this._createDocumentElement(t)}},{key:"init",value:function(){this._createResources(),this.eventBus.emit(f)}},{key:"_componentDidMount",value:function(){this.eventBus.emit(d)}},{key:"_componentDidUpdate",value:function(t,e){this._checkProps(t,e)&&this._render()}},{key:"_checkProps",value:function(t,e){return t!==e}},{key:"_render",value:function(){var t=this.render();this._element.innerHTML="",this._element.insertAdjacentHTML("beforeend",t)}},{key:"render",value:function(){}},{key:"getContent",value:function(){return this.element}},{key:"_makePropsProxy",value:function(t){var e=this;return new Proxy(t,{get:function(t,e){var n=t[e];return"function"==typeof n?n.bind(t):n},set:function(t,n,r){var o=t[n];return t[n]=r,e.eventBus.emit(h,o,t[n]),!0},deleteProperty:function(){throw new Error("Нет доступа")}})}},{key:"_createDocumentElement",value:function(t){return document.createElement(t)}},{key:"show",value:function(){this.getContent().style.display="block"}},{key:"hide",value:function(){this.getContent().style.display="none"}},{key:"element",get:function(){return this._element}}]),t}(),y=function(){function t(e,n,r){o()(this,t),c()(this,"pathname",void 0),c()(this,"blockClass",void 0),c()(this,"block",void 0),c()(this,"props",void 0),this.pathname=e,this.blockClass=n,this.block=null,this.props=r}return s()(t,[{key:"leave",value:function(){this.block&&this.block.hide()}},{key:"match",value:function(t){return t===this.pathname}},{key:"render",value:function(){if(!this.block)return this.block=this.blockClass,this.renderInDOM(this.props.rootQuery,this.block),void this.setListenersToElement(this.block);this.block.show(),this.block.setInfo&&this.block.setInfo()}},{key:"renderInDOM",value:function(t,e){var n=document.querySelector(t);return n.appendChild(e.getContent()),n}},{key:"setListenersToElement",value:function(t){t.setListeners()}}]),t}(),_=function(){function t(e){if(o()(this,t),c()(this,"routes",void 0),c()(this,"history",void 0),c()(this,"currentRoute",void 0),c()(this,"rootQuery",void 0),t.__instance)return t.__instance;this.routes=[],this.history=window.history,this.currentRoute=null,this.rootQuery=e,t.__instance=this}return s()(t,[{key:"use",value:function(t,e){var n=new y(t,e,{rootQuery:this.rootQuery});return this.routes.push(n),this}},{key:"start",value:function(){var t=this;window.onpopstate=function(e){t.onRoute(e.currentTarget.location.pathname)},this.onRoute(window.location.pathname)}},{key:"onRoute",value:function(t){var e=this.getRoute(t);e&&(this.currentRoute&&this.currentRoute.leave(),this.currentRoute=e,e.render())}},{key:"go",value:function(t){this.history.pushState({},"",t),this.onRoute(t)}},{key:"back",value:function(){this.history.go(-1)}},{key:"forward",value:function(){this.history.go(1)}},{key:"getRoute",value:function(t){return this.routes.find((function(e){return e.match(t)}))}}]),t}();c()(_,"__instance",void 0);var g=function(){function t(e){o()(this,t),c()(this,"TEMPLATE_REGEXP",void 0),c()(this,"template",void 0),this.template=e,this.TEMPLATE_REGEXP=/{{(.*?)}}/gi}return s()(t,[{key:"compile",value:function(t){var e=this.template;return this.compileTemplate(e,t)}},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=t;return r&&r[e]?r[e]:n}},{key:"compileTemplate",value:function(t,e){var n=t,r=null;if(e)for(;r=this.TEMPLATE_REGEXP.exec(n);)if(r[1]){var o=this.get(e,r[1],r[0]);n=n.replace(new RegExp(r[0],"gi"),o)}return n}}]),t}(),b=function(){function t(e,n){o()(this,t),this.errors=e,this.form=n}return s()(t,[{key:"validate",value:function(t){this.checkValidity(t),this.checkAllInputs()?this.activateButton():this.disableButton()}},{key:"checkValidity",value:function(t){var e=document.querySelector("".concat(this.form," #").concat(t.target.name)),n=!t.target.validity.valid&&t.target.value.length>0&&e;0===t.target.value.length&&e?(e.textContent=this.errors.ru.emptyInput,this.disableButton()):n?(e.textContent=this.errors.ru[t.target.type],this.disableButton()):this.removeErrors(t)}},{key:"checkAllInputs",value:function(){var t=document.querySelectorAll("".concat(this.form," input"));return Array.from(t).every((function(t){return!0===t.validity.valid}))}},{key:"removeErrors",value:function(t){var e=document.querySelector("".concat(this.form," #").concat(t.target.name));e&&(e.textContent="")}},{key:"disableButton",value:function(){document.querySelector("".concat(this.form,' button[type="submit"]')).setAttribute("disabled","true")}},{key:"activateButton",value:function(){document.querySelector("".concat(this.form,' button[type="submit"]')).removeAttribute("disabled")}}]),t}(),k=new _("#page"),w=n(4),x=n.n(w),S=n(5),R=n.n(S),A=n(2),C=n.n(A);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var L=function(t){x()(n,t);var e=P(n);function n(){return o()(this,n),e.call(this,"section")}return s()(n,[{key:"render",value:function(){return new g('<div id="user-top-menu" class="user-top-menu">\n  <div id="user-top-menu-avatar" class="user-top-menu__avatar">\n    <img class="user-top-menu__avatar-image" src="{{img}}" alt="{{name}}">\n    <h1 class="user-top-menu__name">{{name}}</h1>\n  </div>\n  <div id="user-top-menu__buttons" class="user-top-menu__buttons">\n    <button type="button" id="user-top-menu__info"  class="user-top-menu__button">\n      <svg  width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.286 18.071V16.5a3.143 3.143 0 00-3.143-3.143H7.857A3.143 3.143 0 004.714 16.5v1.571M11 10.214a3.143 3.143 0 100-6.286 3.143 3.143 0 000 6.286z" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n    </button>\n    <button type="button" id="user-top-menu__avatar" class="user-top-menu__button">\n      <svg width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.5 3.929h-11c-.868 0-1.571.703-1.571 1.571v11c0 .868.703 1.571 1.571 1.571h11c.868 0 1.571-.703 1.571-1.571v-11c0-.868-.703-1.571-1.571-1.571z" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.25 9.429a1.179 1.179 0 100-2.358 1.179 1.179 0 000 2.358zM18.071 13.357L14.143 9.43 5.5 18.07" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n    </button>\n    <button type="button" id="user-top-menu__password" class="user-top-menu__button">\n      <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M11 18.8571C11 18.8571 17.2857 15.7143 17.2857 11V5.5L11 3.14286L4.71428 5.5V11C4.71428 15.7143 11 18.8571 11 18.8571Z" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n    </button>\n    <button type="button" id="user-top-menu__chat" class="user-top-menu__button">\n      <svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6v12M6 12h12" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n    </button>\n</div>\n</div>').compile(this.data)}}]),n}(m);function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var O=function(t){x()(n,t);var e=E(n);function n(){return o()(this,n),e.call(this,"section")}return s()(n,[{key:"render",value:function(){return new g('<form id="message" class="form form_chat chat-bottom-interface" novalidate>\n          <input\n            type="text"\n            name="text"\n            class="form__input form__input_chat chat-bottom-interface__input"\n            placeholder="Написать сообщение..."\n            minlength="1"\n            maxlength="499"\n            required\n          />\n          <div class="chat-bottom-interface__wrapper">\n            <button\n              type="button"\n              class="common chat-bottom-interface__button chat-bottom-interface__button_photo"\n            >\n              <svg\n                width="28"\n                height="28"\n                viewBox="0 0 28 28"\n                fill="none"\n                class="chat-bottom-interface__image"\n              >\n                <path\n                  d="M25 21C25 21.5304 24.7893 22.0391 24.4142 22.4142C24.0391 22.7893 23.5304 23 23 23H5C4.46957 23 3.96086 22.7893 3.58579 22.4142C3.21071 22.0391 3 21.5304 3 21V10C3 9.46957 3.21071 8.96086 3.58579 8.58579C3.96086 8.21071 4.46957 8 5 8H9L11 5H17L19 8H23C23.5304 8 24.0391 8.21071 24.4142 8.58579C24.7893 8.96086 25 9.46957 25 10V21Z"\n                  stroke="#787885"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n                <path\n                  d="M14 19C16.2091 19 18 17.2091 18 15C18 12.7909 16.2091 11 14 11C11.7909 11 10 12.7909 10 15C10 17.2091 11.7909 19 14 19Z"\n                  stroke="#787885"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n              </svg>\n            </button>\n            <button\n              type="button"\n              class="common chat-bottom-interface__button chat-bottom-interface__button_file"\n            >\n              <svg\n                width="28"\n                height="28"\n                viewBox="0 0 28 28"\n                fill="none"\n                class="chat-bottom-interface__image"\n              >\n                <path\n                  d="M24 21C24 21.5304 23.7893 22.0391 23.4142 22.4142C23.0391 22.7893 22.5304 23 22 23H6C5.46957 23 4.96086 22.7893 4.58579 22.4142C4.21071 22.0391 4 21.5304 4 21V7C4 6.46957 4.21071 5.96086 4.58579 5.58579C4.96086 5.21071 5.46957 5 6 5H11L13 8H22C22.5304 8 23.0391 8.21071 23.4142 8.58579C23.7893 8.96086 24 9.46957 24 10V21Z"\n                  stroke="#787885"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n              </svg>\n            </button>\n            <button\n              type="button"\n              class="common chat-bottom-interface__button chat-bottom-interface__button_location"\n            >\n              <svg\n                width="24"\n                height="24"\n                viewBox="0 0 24 24"\n                fill="none"\n                class="chat-bottom-interface__image"\n              >\n                <path\n                  d="M19.3469 10.3673C19.3469 16.0816 12 20.9796 12 20.9796C12 20.9796 4.65302 16.0816 4.65302 10.3673C4.65302 8.4188 5.42707 6.55007 6.80488 5.17225C8.1827 3.79444 10.0514 3.02039 12 3.02039C13.9485 3.02039 15.8172 3.79444 17.195 5.17225C18.5728 6.55007 19.3469 8.4188 19.3469 10.3673Z"\n                  stroke="#787885"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n                <path\n                  d="M12 12.8163C13.3525 12.8163 14.449 11.7198 14.449 10.3673C14.449 9.01478 13.3525 7.91833 12 7.91833C10.6475 7.91833 9.55103 9.01478 9.55103 10.3673C9.55103 11.7198 10.6475 12.8163 12 12.8163Z"\n                  stroke="#787885"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n              </svg>\n            </button>\n            <button\n              type="submit"\n              class="common form__button chat-bottom-interface__button chat-bottom-interface__button_send" disabled\n            >\n              <svg\n                width="28"\n                height="28"\n                viewBox="0 0 28 28"\n                fill="none"\n                class="chat-bottom-interface__image"\n              >\n                <path\n                  d="M7 14H21"\n                  stroke="black"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n                <path\n                  d="M14 7L21 14L14 21"\n                  stroke="black"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n              </svg>\n            </button>\n          </div>\n        </form>').compile(this.data)}}]),n}(m),I=n(8),D=n.n(I);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var q=function(t){x()(n,t);var e=j(n);function n(t,r){var a;return o()(this,n),(a=e.call(this,"section",t)).props=r,c()(D()(a),"page",void 0),a}return s()(n,[{key:"setListeners",value:function(){var t=this;this.page=document.querySelector(this.props.page),this.page&&this.page.addEventListener("click",(function(e){"chat-button"===e.target.getAttribute("id")&&t.props.router.go(t.props.path.chat)}))}}]),n}(m),M='\n<section id="{{id}}"  class="error-page {{type}}">\n  <h1 class="error-page__header">{{error}}</h1>\n  <p class="error-page__text">{{text}}</p>\n  <button id="chat-button" type="button" class="error-page__link">Назад к чатам</button>\n</section>';function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var F=function(t){x()(n,t);var e=T(n);function n(){return o()(this,n),e.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return new g(M).compile(this.data)}}]),n}(q);function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var B=function(t){x()(n,t);var e=U(n);function n(t){return o()(this,n),e.call(this,"section",t)}return s()(n,[{key:"render",value:function(){return new g('\n<section class="favorites">\n          <h2 class="favorites__title">{{title}}</h2>\n          <div class="favorites__wrapper"><div class="favorites__user">\n              <div class="favorites__avatar">\n                <img class="favorites__avatar-image" src="{{src}}" alt="{{name}}">\n                <div class="favorites__status"></div>\n              </div>\n              <p class="favorites__user-name">{{name}}</p>\n            </div><div class="favorites__user">\n              <div class="favorites__avatar">\n                <img class="favorites__avatar-image" src="{{src}}" alt="{{name}}">\n                <div class="favorites__status"></div>\n              </div>\n              <p class="favorites__user-name">{{name}}</p>\n            </div><div class="favorites__user">\n              <div class="favorites__avatar">\n                <img class="favorites__avatar-image" src="{{src}}" alt="{{name}}">\n                <div class="favorites__status"></div>\n              </div>\n              <p class="favorites__user-name">{{name}}</p>\n            </div><div class="favorites__user">\n              <div class="favorites__avatar">\n                <img class="favorites__avatar-image" src="{{src}}" alt="{{name}}">\n                <div class="favorites__status"></div>\n              </div>\n              <p class="favorites__user-name">{{name}}</p>\n            </div></div>\n        </section>').compile(this.data)}}]),n}(m);function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var H=function(t){x()(n,t);var e=N(n);function n(t,r){var a;return o()(this,n),(a=e.call(this,"div",t)).props=r,a}return s()(n,[{key:"setInitialListeners",value:function(){this.props.checkInputsOnFocusAndBlur(this.props.validation,this.props.form)}},{key:"removeTextAndErrors",value:function(){this.removeInputText(),this.removeErrors()}},{key:"removeInputText",value:function(){document.querySelectorAll("".concat(this.props.form," input")).forEach((function(t){t.value=""}))}},{key:"removeErrors",value:function(){document.querySelectorAll("".concat(this.props.form," .error")).forEach((function(t){return t.textContent=""}))}},{key:"disableButton",value:function(){document.querySelector("".concat(this.props.form,' button[type="submit"]')).setAttribute("disabled","true")}},{key:"setRouter",value:function(t,e,n){var r=this;document.querySelector(t).addEventListener("click",(function(t){t.target.getAttribute("id")===e&&(r.props.router.go(n),r.removeTextAndErrors(),r.disableButton())}))}}]),n}(m),J=n(3),W=n.n(J),$=n(7),G=n.n($);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var V=function(t){x()(r,t);var e,n=z(r);function r(){return o()(this,r),n.apply(this,arguments)}return s()(r,[{key:"render",value:function(){return new g('\n<form class="form form_auth" name="auth" id="auth" novalidate="">\n   <fieldset class="form__fieldset" name="fieldset">\n      <legend class="form__legend">Авторизация</legend>\n      <div class="form__container">\n         <label for="authorization-email" class="form__label">Почта</label>\n         <input type="text" name="login" class="input form__input form__input_auth" id="authorization-email" placeholder="{{loginPlaceholder}}" pattern="{{loginPattern}}" required>\n         <p class="error error_type_login" id="login"></p>\n      </div>\n      <div class="form__container">\n      <label for="authorization-password" class="form__label">Пароль</label>\n        <input type="password" name="password" class="input form__input form__input_auth" id="authorization-password" placeholder="{{passPlaceholder}}" pattern="{{passPattern}}" required>\n        <p class="error error_type_password" id="password"></p>\n    </div>\n    <p class="error error_type_auth-error" id="reg-error"></p>\n      <div class="form__container"><button type="submit" class="common form__button" disabled>\n         {{button}}</button>\n      </div>\n      <div class="form__container">\n         <button id="reg-form" type="button" class="form__link">{{link}}</button>\n      </div>\n   </fieldset>\n</form>').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.submit(),this.setRouter(this.props.form,this.props.button,this.props.path.reg)}},{key:"submit",value:function(){var t=this,e=document.querySelector(this.props.form);e.addEventListener("submit",(function(n){n.preventDefault();var r=t.props.getDataOnSubmit(t.props.validation,t.props.form);r.status&&t.signIn(r.data,e)}))}},{key:"signIn",value:(e=G()(W.a.mark((function t(e,n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.authApi.signIn(e);case 3:200===(r=t.sent).status?(this.props.router.go(this.props.path.chat),this.removeTextAndErrors(),this.disableButton()):n.querySelector(this.props.error).textContent=JSON.parse(r.response).reason,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t,n){return e.apply(this,arguments)})}]),r}(H);function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var Q=function(t){x()(r,t);var e,n=Z(r);function r(){return o()(this,r),n.apply(this,arguments)}return s()(r,[{key:"render",value:function(){return new g('\n<form class="form form_reg" name="reg" id="reg" novalidate>\n    <fieldset class="form__fieldset" name="fieldset">\n      <legend class="form__legend">Регистрация</legend>\n    </fieldset>\n    <div class="form__container">\n      <label for="registration-first-name" class="form__label">Имя</label>\n      <input type="text" name="first_name" class="input form__input form__input_reg" id="registration-first-name" placeholder="{{firstNamePlaceholder}}" pattern="{{secondNamePattern}}" required>\n      <p class="error error_type_email" id="first_name"></p>\n    </div>\n    <div class="form__container">\n      <label for="registration-second-name" class="form__label">Фамилия</label>\n      <input type="text" name="second_name" class="input form__input form__input_reg" id="registration-second-name" placeholder="{{secondNamePlaceholder}}" pattern="{{secondNamePattern}}" required>\n      <p class="error error_type_email" id="second_name"></p>\n    </div>\n    <div class="form__container">\n    <label for="registration-login" class="form__label">Логин</label>\n      <input type="text" name="login" class="input form__input form__input_reg" id="registration-login" placeholder="{{loginPlaceholder}}" pattern="{{loginPattern}}" required>\n      <p class="error error_type_login" id="login"></p>\n    </div>\n    <div class="form__container">\n      <label for="registration-email" class="form__label">Почта</label>\n      <input type="email" name="email" class="input form__input form__input_reg" id="registration-email" placeholder="{{mailPlaceholder}}" pattern="{{mailPattern}}" required>\n      <p class="error error_type_email" id="email"></p>\n    </div>\n    <div class="form__container">\n      <label for="registration-password" class="form__label">Пароль</label>\n      <input type="password" name="password" class="input form__input form__input_reg" id="registration-password" placeholder="{{passPlaceholder}}" pattern="{{passPattern}}" required>\n      <p class="error error_type_password" id="password"></p>\n    </div>\n    <div class="form__container">\n    <label for="registration-phone" class="form__label">Телефон</label>\n      <input type="tel" name="phone" class="input form__input form__input_reg" id="registration-phone" placeholder="{{phonePlaceholder}}" pattern="{{phonePattern}}" required>\n      <p class="error error_type_email" id="phone"></p>\n    </div>\n    <div class="form__container">\n      <p class="error error_type_reg-error" id="reg-error"></p>\n      <button type="submit" class="common form__button" disabled>{{button}}</button>\n    </div>\n    <div class="form__container">\n      <button id="auth-form" type="button" class="form__link">{{link}}</button>\n    </div>\n  </form>').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.submit(),this.setRouter(this.props.form,this.props.button,this.props.path.auth)}},{key:"submit",value:function(){var t=this,e=document.querySelector(this.props.form);e.addEventListener("submit",(function(n){n.preventDefault();var r=t.props.getDataOnSubmit(t.props.validation,t.props.form);r.status&&t.signUp(r.data,e)}))}},{key:"signUp",value:(e=G()(W.a.mark((function t(e,n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.authApi.signUp(e);case 3:200===(r=t.sent).status?(this.props.router.go(this.props.path.chat),this.removeTextAndErrors(),this.disableButton()):n.querySelector(this.props.error).textContent=JSON.parse(r.response).reason,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t,n){return e.apply(this,arguments)})}]),r}(H);function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var Y=function(t){x()(n,t);var e=X(n);function n(t){return o()(this,n),e.call(this,"section",t)}return s()(n,[{key:"render",value:function(){return new g('<div class="message">\n              <div data-chat-id="{{id}}" class="message__wrapper">\n                <div class="message__user-avatar">\n                  <img\n                    class="message__user-image"\n                    src="{{avatar}}"\n                    alt="{{title}}"\n                  />\n                </div>\n                <div class="message__text-wrapper">\n                  <p class="message__user-name">{{title}}</p>\n                </div>\n              </div>\n            </div>').compile(this.data)}}]),n}(m);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var tt=function(t){x()(n,t);var e=K(n);function n(t){return o()(this,n),e.call(this,"div",t)}return s()(n,[{key:"render",value:function(){return new g('<div data-user-id="{{user_id}}" class="messages-container__group">\n              <div class="messages-container__avatar">\n                <img\n                  class="messages-container__image"\n                  src="{{avatar}}"\n                  alt="Игорь"\n                />\n                <div class="messages-container__status"></div>\n              </div>\n              <div\n                class="messages-container__wrapper messages-container__wrapper_in"\n              >\n                <p class="messages-container__text">{{content}}</p>\n                <p class="messages-container__time">{{time}}</p>\n              </div>\n            </div>').compile(this.data)}}]),n}(m);function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var nt=function(t){x()(n,t);var e=et(n);function n(t){return o()(this,n),e.call(this,"div",t)}return s()(n,[{key:"render",value:function(){return new g('<div data-user-id="{{user_id}}" class="messages-container__group messages-container__group_out">\n              <div class="messages-container__avatar">\n                <img\n                  class="messages-container__image"\n                  src="{{avatar}}"\n                  alt="Игорь"\n                />\n                <div class="messages-container__status"></div>\n              </div>\n              <div\n                class="messages-container__wrapper messages-container__wrapper_out"\n              >\n                <p class="messages-container__text">{{content}}</p>\n                <p class="messages-container__time">{{time}}</p>\n              </div>\n            </div>').compile(this.data)}}]),n}(m);function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var ot=function(t){x()(n,t);var e=rt(n);function n(){return o()(this,n),e.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return new g(M).compile(this.data)}}]),n}(q);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var st=function(t){x()(n,t);var e=at(n);function n(){return o()(this,n),e.call(this,"section")}return s()(n,[{key:"render",value:function(){return new g('<section class="search">\n          <div class="search__wrapper">\n            <svg\n              width="24"\n              height="24"\n              viewBox="0 0 24 24"\n              fill="none"\n              class="search__image-search"\n            >\n              <path\n                d="M11.1429 18C14.93 18 18.0001 14.93 18.0001 11.1429C18.0001 7.35576 14.93 4.28571 11.1429 4.28571C7.35581 4.28571 4.28577 7.35576 4.28577 11.1429C4.28577 14.93 7.35581 18 11.1429 18Z"\n                stroke="#787885"\n                stroke-width="2"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n              />\n              <path\n                d="M19.7143 19.7143L15.9857 15.9857"\n                stroke="#787885"\n                stroke-width="2"\n                stroke-linecap="round"\n                stroke-linejoin="round"\n              />\n            </svg>\n            <input class="search__input" type="text" placeholder="Поиск чатов" />\n            <button type="button" class="search__delete">\n              <svg\n                width="24"\n                height="24"\n                viewBox="0 0 24 24"\n                fill="none"\n                class="search__image-delete"\n              >\n                <path\n                  d="M17.1429 6.85714L6.85718 17.1429"\n                  stroke="#76A9FF"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n                <path\n                  d="M6.85718 6.85714L17.1429 17.1429"\n                  stroke="#76A9FF"\n                  stroke-width="2"\n                  stroke-linecap="round"\n                  stroke-linejoin="round"\n                />\n              </svg>\n            </button>\n          </div>\n        </section>').compile(this.data)}}]),n}(m);function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var ct=function(t){x()(n,t);var e=it(n);function n(){return o()(this,n),e.call(this,"section")}return s()(n,[{key:"render",value:function(){return new g('<div data-chat-id="{{id}}" class="chat-top-interface">\n          <div class="chat-top-interface__user-wrapper">\n            <div class="chat-top-interface__avatar">\n              <img\n                class="chat-top-interface__avatar-image"\n                src="{{avatar}}"\n                alt="{{title}}"\n              />\n            </div>\n            <div class="chat-top-interface__info-wrapper">\n              <h2 class="chat-top-interface__name">{{title}}</h2>\n            </div>\n          </div>\n\n          <div class="chat-top-interface__button-wrapper">\n            <button type="button" id="chat-avatar-button" class="common chat-top-interface__button">\n              <svg width="22" height="22" fill="none" class="chat-top-interface__button-image" xmlns="http://www.w3.org/2000/svg"><path d="M16.5 3.929h-11c-.868 0-1.571.703-1.571 1.571v11c0 .868.703 1.571 1.571 1.571h11c.868 0 1.571-.703 1.571-1.571v-11c0-.868-.703-1.571-1.571-1.571z" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.25 9.429a1.179 1.179 0 100-2.358 1.179 1.179 0 000 2.358zM18.071 13.357L14.143 9.43 5.5 18.07" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n            </button>\n            <button type="button" id="chat-add-users-button" class="common chat-top-interface__button">\n              <svg width="22" height="22" fill="none" class="chat-top-interface__button-image" xmlns="http://www.w3.org/2000/svg"><path d="M14.143 18.071V16.5A3.143 3.143 0 0011 13.357H5.5A3.143 3.143 0 002.357 16.5v1.571M8.25 10.214a3.143 3.143 0 100-6.286 3.143 3.143 0 000 6.286zM17.286 7.857v4.714M19.643 10.214h-4.714" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n            </button>\n            <button type="button" id="chat-about-button" class="common chat-top-interface__button">\n              <svg width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 18.857a7.857 7.857 0 100-15.714 7.857 7.857 0 000 15.714zM11 14.143V11" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="7.857" r=".5" stroke="#787885" stroke-width=".571"/></svg>\n            </button>\n          </div>\n').compile(this.data)}}]),n}(m);function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var ft=function(t){x()(a,t);var e,n,r=pt(a);function a(){return o()(this,a),r.apply(this,arguments)}return s()(a,[{key:"render",value:function(){return new g('\n<form class="form form_user" name="user" id="user" novalidate>\n   <div class="form__container"><img class="avatar avatar_large form__avatar" src="{{avatar}}" alt="{{display_name}}"></div>\n   <fieldset class="form__fieldset" name="fieldset">\n      <div class="form__container">\n        <label for="user-first-name" class="form__label">Имя</label>\n         <input type="text" name="first_name" class="input form__input form__input_user" id="user-first-name" placeholder="Введите имя" pattern="^([\\w\\W]{8,30})$" value="{{first_name}}" required>\n         <p class="error error_type_first-name" id="first_name"></p>\n      </div>\n      <div class="form__container">\n         <label for="user-second-name" class="form__label">Фамилия</label>\n         <input type="text" name="second_name" class="input form__input form__input_user" id="user-second-name" placeholder="Введите фамилию" pattern="^([\\w\\W]{8,30})$" value="{{second_name}}" required>\n         <p class="error error_type_second-name" id="second_name"></p>\n      </div>\n      <div class="form__container">\n         <label for="user-display-name" class="form__label">Отображаемое имя</label>\n         <input type="text" name="display_name" class="input form__input form__input_user" id="user-display-name" placeholder="Введите отображаемое имя" pattern="^([\\w\\W]{8,30})$" value="{{display_name}}" required>\n         <p class="error error_type_display-name" id="display_name"></p>\n      </div>\n      <div class="form__container">\n         <label for="user-email" class="form__label">Почта</label>\n         <input type="email" name="email" class="input form__input form__input_user" id="user-email" placeholder="{{emailPlaceholder}}" pattern="{{emailPattern}}" value="{{email}}" required>\n         <p class="error error_type_email" id="email"></p>\n      </div>\n      <div class="form__container">\n         <label for="user-login" class="form__label">Логин</label>\n         <input type="text" name="login" class="input form__input form__input_user" id="user-login" placeholder="{{loginPlaceholder}}" pattern="{{loginPattern}}" value="{{login}}" required>\n         <p class="error error_type_email" id="login"></p>\n      </div>\n      <div class="form__container">\n         <label for="user-phone" class="form__label">Телефон</label>\n         <input type="tel" name="phone" class="input form__input form__input_user" id="user-phone" placeholder="Введите телефон" pattern="^(\\+7((\\(\\d{3}\\)\\s?\\d{3}-\\d{2}-\\d{2})|(\\s\\d{3}-\\d{3}-\\d{2}-\\d{2})|(\\d{10})))|(8\\d{10})$" value="{{phone}}" required>\n         <p class="error error_type_email" id="phone"></p>\n      </div>\n      <div class="form__container"><button type="submit" class="common form__button" disabled>\n         {{button}}</button>\n      </div>\n      <div class="form__container">\n         <button id="exit-button" type="button" class="form__link form__link_exit">{{link}}</button>\n         <button id="chat-button"  type="button" class="form__link form__link_chat">{{linkChat}}</button>\n      </div>\n   </fieldset>\n</form>\n').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.submit(),this.setRouter()}},{key:"setRouter",value:function(){var t=this,e=document.querySelector(this.props.form);e&&e.addEventListener("click",(function(e){var n=e.target;"exit-button"===n.getAttribute("id")?t.logoutFromChat():"chat-button"===n.getAttribute("id")&&t.props.router.go(t.props.path.chat)}))}},{key:"logoutFromChat",value:(n=G()(W.a.mark((function t(){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.authApi.logout();case 3:200===t.sent.status&&this.props.router.go(this.props.path.auth),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"submit",value:function(){var t=this,e=document.querySelector(this.props.form);e&&e.addEventListener("submit",function(){var n=G()(W.a.mark((function n(r){var o,a;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),!(o=t.props.getDataOnSubmit(t.props.validation,t.props.form)).status){n.next=13;break}return n.prev=3,n.next=6,t.props.userApi.updateProfile(o.data);case 6:200===(a=n.sent).status?t.props.router.go(t.props.path.chat):e.querySelector(t.props.error).textContent=JSON.parse(a.response).reason,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(t){return n.apply(this,arguments)}}())}},{key:"setInfo",value:(e=G()(W.a.mark((function t(){var e,n,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.authApi.getUserInfo();case 3:200===(e=t.sent).status?(n=JSON.parse(e.response),r=n.avatar,this.setProps(lt(lt({},JSON.parse(e.response)),{},{avatar:r?"https://ya-praktikum.tech".concat(r):"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg"})),this.setListeners()):this.props.router.go("/auth"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})}]),a}(H);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var dt=function(t){x()(n,t);var e=ht(n);function n(){return o()(this,n),e.apply(this,arguments)}return s()(n,[{key:"render",value:function(){return new g('\n<form class="form form_pass" name="pass" id="pass" novalidate="">\n   <fieldset class="form__fieldset" name="fieldset">\n    <legend class="form__legend">Смена пароля</legend>\n    <div class="form__container">\n        <label for="old-password" class="form__label">Старый пароль</label>\n        <input type="password" name="oldPassword" class="input form__input form__input_pass" id="old-password" placeholder="{{oldPassword}}" pattern="{{passPattern}}" required>\n        <p class="error error_type_password" id="oldPassword"></p>\n    </div>\n    <div class="form__container">\n        <label for="new-password" class="form__label">Новый пароль</label>\n        <input type="password" name="newPassword" class="input form__input form__input_pass" id="new-password" placeholder="{{newPassword}}" pattern="{{passPattern}}" required>\n        <p class="error error_type_password" id="newPassword"></p>\n    </div>\n    <p class="error error_type_pass-error" id="pass-error"></p>\n      <div class="form__container"><button id="" type="submit" class="common form__button" disabled>\n         {{button}}</button>\n      </div>\n      <div class="form__container">\n         <button id="pass-form" type="button" class="form__link">{{link}}</button>\n      </div>\n   </fieldset>\n</form>').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.submit(),this.setRouter()}},{key:"setRouter",value:function(){var t=this;document.querySelector(this.props.form).addEventListener("click",(function(e){"pass-form"===e.target.getAttribute("id")&&(t.props.router.go(t.props.path.chat),t.removeTextAndErrors(),t.disableButton())}))}},{key:"submit",value:function(){var t=this,e=document.querySelector(this.props.form);e.addEventListener("submit",function(){var n=G()(W.a.mark((function n(r){var o,a;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),o=t.props.getDataOnSubmit(t.props.validation,t.props.form),n.prev=2,n.next=5,t.props.userApi.updatePass(o.data);case 5:if(200!==(a=n.sent).status){n.next=13;break}return n.next=9,t.props.authApi.logout();case 9:200===n.sent.status&&(t.props.router.go(t.props.path.auth),t.removeTextAndErrors(),t.disableButton()),n.next=14;break;case 13:e.querySelector(t.props.error).textContent=a.response;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(2),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[2,16]])})));return function(t){return n.apply(this,arguments)}}())}}]),n}(H);function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var mt=function(t){x()(r,t);var e,n=vt(r);function r(){var t;o()(this,r);for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a)),c()(D()(t),"avatarForm",void 0),t}return s()(r,[{key:"render",value:function(){return new g('\n<form class="form form_ava" name="ava" id="myAvatarForm" novalidate="">\n   <fieldset class="form__fieldset" name="fieldset">\n      <legend class="form__legend">Обновить аватар</legend>\n      <div class="form__container">\n         <input id="avatar" type="file" name="avatar" class="input form__input form__input_auth" accept="image/*" required>\n         <p class="error error_type_ava-file" id="avaFile"></p>\n      </div>\n    <p class="error error_type_ava-error" id="chat-form-error"></p>\n      <div class="form__container"><button type="submit" class="common form__button" disabled>\n         {{button}}</button>\n      </div>\n      <div class="form__container">\n         <button id="ava-form" type="button" class="form__link">{{link}}</button>\n      </div>\n   </fieldset>\n</form>').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.submit(),this.setRouter()}},{key:"setRouter",value:function(){var t=this;document.querySelector(this.props.form).addEventListener("click",(function(e){"ava-form"===e.target.getAttribute("id")&&t.props.router.go(t.props.path.chat)}))}},{key:"submit",value:function(){var t=this;this.avatarForm=document.querySelector(this.props.form),this.avatarForm.addEventListener("submit",(function(e){e.preventDefault();var n=t.props.getDataOnSubmit(t.props.validation,t.props.form),r=new FormData(t.avatarForm);n.status&&t.updateAvatar(r)}))}},{key:"updateAvatar",value:(e=G()(W.a.mark((function t(e){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.userApi.updateAvatar(e);case 3:200===(n=t.sent).status?(this.props.router.go(this.props.path.chat),this.removeTextAndErrors(),this.disableButton()):this.avatarForm.querySelector(this.props.error).textContent=n.response,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t){return e.apply(this,arguments)})}]),r}(H);function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var _t=function(t){x()(r,t);var e,n=yt(r);function r(){return o()(this,r),n.apply(this,arguments)}return s()(r,[{key:"render",value:function(){return new g('\n<form class="form form_chat" name="chatForm" id="chatForm" novalidate="">\n   <fieldset class="form__fieldset" name="fieldset">\n    <legend class="form__legend">{{legend}}</legend>\n    <div class="form__container">\n      <label for="chatTitle" class="form__label">Новый чат</label>\n      <input type="text" name="title" class="input form__input form__input_chat-title" id="chatTitle" placeholder="{{placeholder}}" pattern="^([\\w\\W]{8,30})$" required>\n      <p class="error error_type_email" id="title"></p>\n    </div>\n    <p class="error error_type_chat-error" id="chat-error"></p>\n      <div class="form__container"><button id="" type="submit" class="common form__button" disabled>\n         {{button}}</button>\n      </div>\n      <div class="form__container">\n         <button id="chat-form-button" type="button" class="form__link">{{link}}</button>\n      </div>\n   </fieldset>\n</form>').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.submit(),this.setRouter()}},{key:"setRouter",value:function(){var t=this;document.querySelector(this.props.form).addEventListener("click",(function(e){e.target.getAttribute("id")===t.props.button&&(t.props.router.go(t.props.path.chat),t.removeTextAndErrors(),t.disableButton())}))}},{key:"submit",value:function(){var t=this,e=document.querySelector(this.props.form);e.addEventListener("submit",(function(n){n.preventDefault();var r=t.props.getDataOnSubmit(t.props.validation,t.props.form);r.status&&t.createChat(r.data,e)}))}},{key:"createChat",value:(e=G()(W.a.mark((function t(e,n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.chatApi.createChat(e);case 3:200===(r=t.sent).status?(this.props.router.go(this.props.path.chat),this.removeTextAndErrors(),this.disableButton()):n.querySelector(this.props.error).textContent=r.response,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t,n){return e.apply(this,arguments)})}]),r}(H);function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var bt=function(t){x()(r,t);var e,n=gt(r);function r(){return o()(this,r),n.apply(this,arguments)}return s()(r,[{key:"render",value:function(){return new g('<form class="form form_chat-avatar" name="chat-avatar" id="myChatAvatarForm" novalidate="">\n   <fieldset class="form__fieldset" name="fieldset">\n      <legend class="form__legend">{{legend}}</legend>\n      <div class="form__container">\n      <img class="avatar avatar_medium form__avatar" src="{{avatar}}" alt="{{display_name}}">\n         <input id="chat-avatar" type="file" name="chatAvatar" class="input form__input form__input_auth" accept="image/*" required>\n         <p class="error error_type_ava-file" id="chatAvatar"></p>\n      </div>\n      <p class="error error_type_chat-avatar-error" id="chat-avatar-error"></p>\n      <div class="form__container"><button type="submit" class="common form__button" disabled>\n         {{button}}</button>\n      </div>\n      <div class="form__container">\n         <button id="chat-avatar-form" type="button" class="form__link">{{link}}</button>\n      </div>\n   </fieldset>\n</form>\n').compile(this.data)}},{key:"setListeners",value:function(){this.setInitialListeners(),this.updateAvatar(),this.setRouter()}},{key:"setRouter",value:function(){var t=this;document.querySelector(this.props.form).addEventListener("click",(function(e){"chat-avatar-form"===e.target.getAttribute("id")&&t.props.router.go(t.props.path.chat)}))}},{key:"updateAvatar",value:function(){var t=this,e=document.querySelector(this.props.form);e.addEventListener("submit",function(){var n=G()(W.a.mark((function n(r){var o,a,s;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),o=t.props.getDataOnSubmit(t.props.validation,t.props.form),(a=new FormData(e)).append("chatId",localStorage.chatId),!o.status){n.next=15;break}return n.prev=5,n.next=8,t.props.chatApi.updateChatAvatar(a);case 8:s=n.sent,console.log(s.response),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(t){return n.apply(this,arguments)}}())}},{key:"setInfo",value:(e=G()(W.a.mark((function t(){var e,n,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.chatApi.getChats();case 3:200===(e=t.sent).status&&(n=JSON.parse(e.response),r=n.avatar,this.setProps({avatar:r?"https://ya-praktikum.tech".concat(r):"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg"}),this.setListeners()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})}]),r}(H);function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var wt=function(t){x()(n,t);var e=kt(n);function n(t){return o()(this,n),e.call(this,"section",t)}return s()(n,[{key:"render",value:function(){return new g('<div data-user-id="{{id}}" class="chat-user-badge">\n  <img class="chat-user-badge__image" src="{{avatar}}" alt="{{display_name}}">\n    <div class="chat-user-badge__container">\n      <p class="chat-user-badge__name">{{login}}</p>\n    </div>\n    <button class="chat-user-badge__action">\n      <svg fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6v12M6 12h12" stroke="#787885" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>\n    </button>\n</div>').compile(this.data)}}]),n}(m),xt='<svg width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.286 6.286l-8.643 8.643L4.714 11" stroke="#43A047" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var Rt=function(t){x()(n,t);var e=St(n);function n(){var t;o()(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a)),c()(D()(t),"formChatUsers",void 0),c()(D()(t),"container",void 0),t}return s()(n,[{key:"render",value:function(){return new g('<form class="form form_chat-users" name="chat-users" id="myChatUsersForm" novalidate="">\n   <fieldset class="form__fieldset" name="fieldset">\n      <legend class="form__legend">Добавить пользователей</legend>\n      <div class="form__container">\n         <label for="chat-users" class="form__label">Логин пользователя</label>\n         <input id="chat-users" type="text" name="chatUsers" class="input form__input form__input_auth" placeholder="Введите логин пользователя" accept="image/*" required>\n         <p class="error error_type_chat-users" id="chatUsers"></p>\n      </div>\n      <div class="form__users-container"></div>\n      <div class="form__container">\n         <button id="chat-users-form" type="button" class="form__link">{{link}}</button>\n      </div>\n   </fieldset>\n</form>').compile(this.data)}},{key:"setListeners",value:function(){this.setRouter(),this.findUsers(),this.addUserToChat()}},{key:"findUsers",value:function(){var t=this;this.formChatUsers.addEventListener("input",function(){var e=G()(W.a.mark((function e(n){var r,o,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target,t.container=document.querySelector(".form__users-container"),t.container.innerHTML="",!(r.value.length>0)){e.next=17;break}return e.prev=4,e.next=7,t.props.userApi.searchUser({login:r.value});case 7:return o=e.sent,e.next=10,t.props.chatApi.getChatUsers(localStorage.chatId);case 10:a=e.sent,200===o.status&&200===a.status&&JSON.parse(o.response).forEach((function(e){e.avatar=e.avatar?"https://ya-praktikum.tech".concat(e.avatar):"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg";var n=new wt(e).getContent();JSON.parse(a.response).forEach((function(t){if(t.id===e.id){var r=n.querySelector("button");r.innerHTML="",r.insertAdjacentHTML("beforeend",xt),r.style.cursor="default",r.setAttribute("disabled","true")}})),t.container.appendChild(n)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"addUserToChat",value:function(){var t=this;this.formChatUsers.addEventListener("click",function(){var e=G()(W.a.mark((function e(n){var r,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(r=n.target).classList.contains("chat-user-badge__action")){e.next=14;break}return o={users:[parseInt(r.parentElement.dataset.userId,10)],chatId:parseInt(localStorage.chatId,10)},e.prev=4,e.next=7,t.props.chatApi.addUserToChat(o);case 7:200===e.sent.status&&(r.innerHTML="",r.insertAdjacentHTML("beforeend",xt)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"setRouter",value:function(){var t=this;this.formChatUsers=document.querySelector(this.props.form),this.formChatUsers.addEventListener("click",(function(e){"chat-users-form"===e.target.getAttribute("id")&&(t.props.router.go(t.props.path.chat),t.removeInputText(),t.container&&(t.container.innerHTML=""))}))}}]),n}(H);function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var Ct=function(t){x()(r,t);var e,n=At(r);function r(t){var e;return o()(this,r),(e=n.call(this,"section")).props=t,e}return s()(r,[{key:"setListeners",value:function(){this.setRouter(),this.removeUserFromChat()}},{key:"render",value:function(){return new g('<div class="chat-info">\n    <img class="chat-info__avatar" src="{{chatAvatar}}" alt="{{chatTitle}}" />\n    <h1 class="chat-info__name">{{chatTitle}}</h1>\n    <div class="chat-info__users"></div>\n    <button id="chat-info-button-back" class="chat-info__button" type="button">Назад к чатам</button>\n</div>').compile(this.data)}},{key:"setRouter",value:function(){var t=this;document.querySelector(".chat-info").addEventListener("click",(function(e){"chat-info-button-back"===e.target.getAttribute("id")&&t.props.router.go(t.props.path.chat)}))}},{key:"removeUserFromChat",value:function(){var t=this;document.querySelector(".chat-info").addEventListener("click",function(){var e=G()(W.a.mark((function e(n){var r,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.target).classList.contains("chat-user-badge__action")){e.next=7;break}return o={users:[parseInt(r.parentElement.dataset.userId,10)],chatId:parseInt(localStorage.chatId,10)},e.next=5,t.props.chatApi.deleteUserFromChat(o);case 5:200===e.sent.status&&r.parentElement.parentElement.remove();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"setInfo",value:(e=G()(W.a.mark((function t(){var e,n,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setProps({chatId:localStorage.chatId,chatAvatar:localStorage.chatAvatar,chatTitle:localStorage.chatTitle}),t.prev=1,t.next=4,this.props.chatApi.getChatUsers(localStorage.chatId);case 4:return e=t.sent,t.next=7,this.props.authApi.getUserInfo();case 7:n=t.sent,200===e.status&&200===n.status&&((r=document.querySelector(".chat-info__users")).innerHTML="",JSON.parse(e.response).forEach((function(t){t.avatar=t.avatar?"https://ya-praktikum.tech".concat(t.avatar):"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg";var e=new wt(t).getContent(),n=e.querySelector("button");n.innerHTML="",n.insertAdjacentHTML("beforeend",'<svg width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.714 6.286l-9.428 9.428M6.286 6.286l9.428 9.428" stroke="#F44336" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'),r.appendChild(e)})),this.setListeners()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[1,11]])}))),function(){return e.apply(this,arguments)})}]),r}(m);function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C()(t);if(e){var o=C()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R()(this,n)}}var Lt=function(t){x()(n,t);var e=Pt(n);function n(t){var r;return o()(this,n),(r=e.call(this,"section",t)).props=t,r}return s()(n,[{key:"setListeners",value:function(){this.setRouter()}},{key:"render",value:function(){return new g('<div class="user-info-from-chat">\n    <img class="user-info-from-chat__avatar" src="{{avatar}}" alt="{{login}}">\n    <p class="user-info-from-chat__caption">Имя</p>\n    <p class="user-info-from-chat__initials">{{first_name}}</p>\n    <p class="user-info-from-chat__caption">Фамилия</p>\n    <p class="user-info-from-chat__initials">{{second_name}}</p>\n    <p class="user-info-from-chat__caption">Логин</p>\n    <p class="user-info-from-chat__initials">{{login}}</p>\n    <p class="user-info-from-chat__caption">Почта</p>\n    <p class="user-info-from-chat__initials">{{email}}</p>\n    <p class="user-info-from-chat__caption">Телефон</p>\n    <p class="user-info-from-chat__initials">{{phone}}</p>\n    <button type="button" class="user-info-from-chat__button">Назад к чатам</button>\n</div>').compile(this.data)}},{key:"setRouter",value:function(){var t=this;document.querySelector(".user-info-from-chat").addEventListener("click",(function(e){e.target.classList.contains("user-info-from-chat__button")&&t.props.router.go(t.props.path.chat)}))}}]),n}(m),Et=function(t,e){document.querySelector(e).querySelectorAll("input").forEach((function(e){e.addEventListener("focus",(function(e){t.validate(e)})),e.addEventListener("change",(function(e){t.validate(e)})),e.addEventListener("blur",(function(e){t.validate(e)})),e.addEventListener("input",(function(e){t.validate(e)}))}))},Ot=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return t.replace(/[&<>"'/]/gi,(function(t){return e[t]}))},It=function(t,e){var n=document.querySelector(e);return t.checkAllInputs()?{status:!0,data:Array.from(n.querySelectorAll("input")).reduce((function(t,e){return t[e.name]=Ot(e.value),t}),{})}:{status:!1}},Dt=function(){function t(e){o()(this,t),this.api=e}return s()(t,[{key:"signUp",value:function(t){return this.api.post("/auth/signup",t)}},{key:"signIn",value:function(t){return this.api.post("/auth/signin",t)}},{key:"getUserInfo",value:function(){return this.api.get("/auth/user")}},{key:"logout",value:function(){return this.api.post("/auth/logout",void 0)}}]),t}(),jt=function(){function t(e){o()(this,t),this.api=e}return s()(t,[{key:"getChats",value:function(){return this.api.get("/chats")}},{key:"getChatUsers",value:function(t){return this.api.get("/chats/".concat(t,"/users"))}},{key:"createChat",value:function(t){return this.api.post("/chats",t)}},{key:"addUserToChat",value:function(t){return this.api.put("/chats/users",t,null)}},{key:"deleteUserFromChat",value:function(t){return this.api.delete("/chats/users",t,null)}},{key:"getChatToken",value:function(t){return this.api.post("/chats/token/".concat(t),null)}},{key:"updateChatAvatar",value:function(t){return this.api.put("/chats/avatar",t,"multipart/form-data")}},{key:"getNewMessages",value:function(t){return this.api.get("/chats/new/".concat(t))}}]),t}(),qt="GET",Mt="POST",Tt="PUT",Ft="DELETE",Ut=function(){function t(e){o()(this,t),this.url=e}return s()(t,[{key:"request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,r=t.method,o=t.body,a=t.path,s=t.contentType;return new Promise((function(t,i){var c=new XMLHttpRequest;c.open(r,e.url+a),c.withCredentials=!0,s||c.setRequestHeader("Content-Type","application/json; charset=utf-8"),c.timeout=n,c.onload=function(){t(c)},c.onabort=i,c.onerror=i,c.ontimeout=i,"GET"!==r&&o?"multipart/form-data"===s?c.send(o):c.send(JSON.stringify(o)):c.send()}))}},{key:"get",value:function(t){return this.request({path:t,method:qt})}},{key:"post",value:function(t,e){return this.request({path:t,body:e,method:Mt})}},{key:"put",value:function(t,e,n){return this.request({path:t,body:e,method:Tt,contentType:n})}},{key:"delete",value:function(t,e,n){return this.request({path:t,body:e,method:Ft,contentType:n})}}]),t}(),Bt=function(){function t(e){o()(this,t),this.api=e}return s()(t,[{key:"updateProfile",value:function(t){return this.api.put("/user/profile",t,null)}},{key:"updatePass",value:function(t){return this.api.put("/user/password",t,null)}},{key:"updateAvatar",value:function(t){return this.api.put("/user/profile/avatar",t,"multipart/form-data")}},{key:"searchUser",value:function(t){return this.api.post("/user/search",t)}},{key:"getUserById",value:function(t){return this.api.get("/user/".concat(t))}}]),t}(),Nt=new Ut("https://ya-praktikum.tech/api/v2"),Ht=new Dt(Nt),Jt=new Bt(Nt),Wt=new jt(Nt),$t=new Q({firstNamePlaceholder:"Введите имя",firstNamePattern:"^([\\w\\W]{8,30})$",secondNamePlaceholder:"Введите фамилию",secondNamePattern:"^([\\w\\W]{8,30})$",mailPlaceholder:"Введите почту",mailPattern:"^\\w+([\\.\\-\\]?\\w+)@\\w+([\\.\\-]?\\w+)*(\\.\\w{2,8})$",loginPlaceholder:"Введите логин",loginPattern:"^([\\w\\W]{8,30})$",passPlaceholder:"Введите пароль",passPattern:"^([\\w\\W]{8,30})$",phonePlaceholder:"Введите телефон",phonePattern:"^(\\+7((\\(\\d{3}\\)\\s?\\d{3}-\\d{2}-\\d{2})|(\\s\\d{3}-\\d{3}-\\d{2}-\\d{2})|(\\d{10})))|(8\\d{10})$",button:"Зарегистрироваться",subbutton:"Уже есть аккаунт?",link:"Войти"},{validation:new b(l,"#reg"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#reg",authApi:Ht,router:k,path:v,button:"auth-form",error:"#reg-error",getDataOnSubmit:It}),Gt=new V({loginPlaceholder:"Введите логин",loginPattern:"^([\\w\\W]{8,30})$",passPlaceholder:"Введите пароль",passPattern:"^([\\w\\W]{8,30})$",button:"Войти",subbutton:"Нет аккаунта?",link:"Зарегистрироваться"},{validation:new b(l,"#auth"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#auth",authApi:Ht,router:k,path:v,button:"reg-form",error:"#reg-error",getDataOnSubmit:It}),zt=new ft({emailPlaceholder:"Введите почту",emailPattern:"^\\w+([\\.\\-\\]?\\w+)@\\w+([\\.\\-]?\\w+)*(\\.\\w{2,8})$",loginPlaceholder:"Введите логин",loginPattern:"^([\\w\\W]{8,30})$",passPlaceholder:"Введите пароль",passPattern:"^([\\w\\W]{8,30})$",button:"Сохранить",subbutton:"Хотите выйти?",link:"Выйти",linkChat:"Назад к чатам"},{validation:new b(l,"#user"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#user",authApi:Ht,userApi:Jt,router:k,path:v,button:"#chat-button",getDataOnSubmit:It}),Vt=new dt({oldPassword:"Введите старый пароль",newPassword:"Введите новый пароль",passPattern:"^([\\w\\W]{8,30})$",button:"Изменить пароль",link:"Назад к чатам"},{validation:new b(l,"#pass"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#pass",authApi:Ht,userApi:Jt,router:k,path:v,button:"#pass-form",error:"#pass-error",getDataOnSubmit:It}),Zt=new mt({button:"Обновить",link:"Назад к чатам"},{validation:new b(l,"#myAvatarForm"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#myAvatarForm",userApi:Jt,router:k,path:v,button:"#ava-form",error:"#ava-error",getDataOnSubmit:It}),Qt=new _t({legend:"Создать чат",placeholder:"Введите название чата",pattern:"^([\\w\\W]{8,30})$",button:"Создать",link:"Назад к чатам"},{validation:new b(l,"#chatForm"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#chatForm",chatApi:Wt,router:k,path:v,button:"chat-form-button",error:"#chat-form-error",getDataOnSubmit:It}),Xt=new bt({button:"Обновить",legend:"Обновить аватар чата",link:"Назад к чатам"},{validation:new b(l,"#myChatAvatarForm"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#myChatAvatarForm",chatApi:Wt,router:k,path:v,getDataOnSubmit:It}),Yt=new Rt({button:"Добавить",link:"Назад к чатам"},{validation:new b(l,"myChatUsersForm"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#myChatUsersForm",chatApi:Wt,userApi:Jt,router:k,path:v,getDataOnSubmit:It}),Kt=new Lt({router:k,path:v}),te=new Ct({chatApi:Wt,authApi:Ht,router:k,path:v}),ee=new ot({id:"not-found-page",type:"error-page_not-found",error:"404",text:"Упс, не туда попали..."},{router:k,page:"#not-found-page",path:v}),ne=new F({id:"error-page",type:"error-page_error",error:"500",text:"Что-то упало, сейчас починим"},{router:k,page:"#error-page",path:v}),re=new L,oe=new st,ae=(new B({src:"https://bit.ly/35S5whM",title:"Избранные",name:"Игорь"}),new ct),se=new O;function ie(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pe=function(){function t(e){o()(this,t),this.props=e,c()(this,"chat",void 0),c()(this,"socket",void 0)}var e,n,r,a;return s()(t,[{key:"getContent",value:function(){return this.chat=document.createElement("section"),this.chat.classList.add("chat-view"),this.chat.setAttribute("id","chat"),this.chat.style.width="100%",this.chat.style.display="flex",this.chat.appendChild(this.props.sideInterface.getContent()),this.chat.appendChild(this.props.dialogInterface.getContent()),this.setInfo(),this.chat}},{key:"setListeners",value:function(){this.props.checkInputsOnFocusAndBlur(this.props.validation,this.props.form),this.openUserInfo(),this.openChatInfo(),this.openChatDialog(),this.getUserInfoInChatDialog(),this.searchOwnChats()}},{key:"getUserInfoInChatDialog",value:function(){var t=this;document.querySelector(".messages-container").addEventListener("click",function(){var e=G()(W.a.mark((function e(n){var r,o,a,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.target).classList.contains("messages-container__image")){e.next=11;break}return o=r.parentElement.parentElement.dataset.userId,e.next=5,t.props.userApi.getUserById(o);case 5:a=e.sent,(s=JSON.parse(a.response)).avatar=t.setAvatar(s.avatar),t.props.router.go(t.props.path.userInfoFromChat),t.props.userInfoFromChat.setProps(s),t.props.userInfoFromChat.setListeners();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"openChatInfo",value:function(){var t=this;this.chat&&this.chat.addEventListener("click",(function(e){var n=e.target;"chat-avatar-button"===n.getAttribute("id")?(t.props.chatAvatarForm.setInfo(),t.props.router.go(t.props.path.chatAvatar)):"chat-add-users-button"===n.getAttribute("id")?t.props.router.go(t.props.path.chatUsers):"chat-about-button"===n.getAttribute("id")&&(t.props.chatInfo.setInfo(),t.props.router.go(t.props.path.chatInfo))}))}},{key:"openUserInfo",value:function(){var t=this;this.chat&&this.chat.addEventListener("click",(function(e){switch(e.target.getAttribute("id")){case"user-top-menu__info":t.props.router.go(t.props.path.userInfo),t.props.userInfo.setInfo(),t.props.userInfo.setListeners();break;case"user-top-menu__password":t.props.router.go(t.props.path.pass);break;case"user-top-menu__avatar":t.props.router.go(t.props.path.ava);break;case"user-top-menu__chat":t.props.router.go(t.props.path.newChat)}}))}},{key:"openChatDialog",value:function(){var t=this;if(this.chat){var e=document.querySelector(".messages-container__overflow");this.chat.addEventListener("click",function(){var n=G()(W.a.mark((function n(r){var o,a;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=r.target,!(o.classList.contains("message__wrapper")&&o.getAttribute("data-chat-id"))){n.next=15;break}return e.innerHTML="",n.prev=4,n.next=7,t.props.chatApi.getChats();case 7:a=n.sent,JSON.parse(a.response).forEach((function(e){var n=e.id===+o.getAttribute("data-chat-id");n&&!e.avatar?(t.props.dialogInterface.topInterface.setProps(le(le({},e),{},{avatar:"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg"})),localStorage.chatId=e.id,localStorage.chatAvatar=e.avatar?e.avatar:"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg",localStorage.chatTitle=e.title):n&&e.avatar&&t.props.dialogInterface.topInterface.setProps(e),t.props.dialogInterface.interface.style.display="block"})),t.setMessagesWebsocket(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(t){return n.apply(this,arguments)}}())}}},{key:"setMessagesWebsocket",value:(a=G()(W.a.mark((function t(){var e,n,r,o,a=this;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.authApi.getUserInfo();case 2:return e=t.sent,n=JSON.parse(e.response).id,t.next=6,this.props.chatApi.getChatToken(localStorage.chatId);case 6:r=t.sent,o=JSON.parse(r.response).token,this.socket=new WebSocket("wss://ya-praktikum.tech/ws/chats/".concat(n,"/").concat(localStorage.chatId,"/").concat(o)),this.socket.addEventListener("open",(function(){a.socket.send(JSON.stringify({content:"0",type:"get old"}))})),this.socket.addEventListener("message",(function(t){a.fillMessages(t.data)})),this.props.sendMessageOnSubmit(this.props.validation,this.props.form,this.socket,"");case 12:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"fillMessages",value:(r=G()(W.a.mark((function t(e){var n,r,o,a,s,i,c,u;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("user connected"!==JSON.parse(e).type){t.next=2;break}return t.abrupt("return");case 2:return n=document.querySelector(".messages-container__overflow"),r=Array.isArray(JSON.parse(e))?JSON.parse(e).reverse():[JSON.parse(e)],t.next=6,this.props.authApi.getUserInfo();case 6:o=t.sent,a=JSON.parse(o.response).id,s=0;case 9:if(!(s<r.length)){t.next=20;break}return i=r[s].user_id||r[s].userId,t.next=13,this.props.userApi.getUserById(i);case 13:c=t.sent,u=JSON.parse(c.response).avatar,r[s].avatar=this.setAvatar(u),r[s].time=this.getMessagesTime(r[s].time);case 17:s+=1,t.next=9;break;case 20:this.fillChatWithMessages(r,n,a),this.scrollToBottom(n);case 22:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getMessagesTime",value:function(t){var e=new Date(t),n=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),r=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(n,":").concat(r)}},{key:"setAvatar",value:function(t){return t?"https://ya-praktikum.tech".concat(t):"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg"}},{key:"fillChatWithMessages",value:function(t,e,n){t.forEach((function(t){var r=t.user_id||t.userId;t.user_id=r;var o=r!==+n?new tt(t):new nt(t);e.appendChild(o._element)}))}},{key:"setAvatarAndName",value:(n=G()(W.a.mark((function t(){var e,n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.authApi.getUserInfo();case 3:200===(e=t.sent).status?(n=JSON.parse(e.response),this.props.sideInterface.avatar.setProps({name:n.display_name||"Кто-то"}),this.props.sideInterface.avatar.setProps({img:n.avatar?"https://ya-praktikum.tech".concat(n.avatar):"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg"})):(console.log("Ошибка ".concat(e.status)),this.props.router.go("/auth")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"setChatsMessages",value:(e=G()(W.a.mark((function t(){var e,n,r,o,a,s;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.props.chatApi.getChats();case 3:if(200===(e=t.sent).status){this.clearMessagesList(),n=JSON.parse(e.response),r=ie(n);try{for(r.s();!(o=r.n()).done;)a=o.value,s=a.avatar?new Y(a):new Y(le(le({},a),{},{avatar:"https://dmitrovipoteka.ru/wp-content/uploads/2016/09/default-user-img.jpg"})),this.props.sideInterface.messagesList.wrapper.appendChild(s.getContent())}catch(t){r.e(t)}finally{r.f()}}else console.log("Ошибка: ".concat(e.status));t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})},{key:"searchOwnChats",value:function(){document.querySelector(".search__input").addEventListener("input",(function(t){var e=t.target,n=document.querySelectorAll(".messages-list__wrapper section");Array.from(n).forEach((function(t){t.querySelector(".message__text-wrapper").innerText.includes(e.value)?t.style.display="block":t.style.display="none"}))}))}},{key:"clearMessagesList",value:function(){this.props.sideInterface.messagesList.wrapper.innerHTML=""}},{key:"show",value:function(){this.chat.style.display="flex"}},{key:"hide",value:function(){this.chat.style.display="none"}},{key:"setInfo",value:function(){this.setChatsMessages(),this.setAvatarAndName()}},{key:"scrollToBottom",value:function(t){t.scrollTop+=t.scrollHeight-t.clientHeight}}]),t}(),fe=function(){function t(e,n,r){o()(this,t),this.avatar=e,this.search=n,this.messagesList=r,c()(this,"interface",void 0)}return s()(t,[{key:"getContent",value:function(){return this.interface=document.createElement("section"),this.interface.classList.add("left"),this.interface.appendChild(this.avatar.getContent()),this.interface.appendChild(this.search.getContent()),this.interface.appendChild(this.messagesList.getContent()),this.interface}}]),t}(),he=function(){function t(){o()(this,t),c()(this,"wrapper",void 0)}return s()(t,[{key:"getContent",value:function(){var t=document.createElement("section"),e=document.createElement("div");return this.wrapper=e,t.classList.add("messages-container"),e.classList.add("messages-container__overflow"),t.appendChild(e),t}}]),t}(),de=function(){function t(){o()(this,t),c()(this,"wrapper",void 0)}return s()(t,[{key:"getContent",value:function(){var t=document.createElement("section"),e=document.createElement("h2"),n=document.createElement("div");return this.wrapper=n,t.classList.add("messages-list"),e.classList.add("messages-list__title"),n.classList.add("messages-list__wrapper"),e.textContent="Сообщения",t.appendChild(e),t.appendChild(n),t}}]),t}(),ve=function(){function t(e,n,r){o()(this,t),this.topInterface=e,this.messagesContainer=n,this.bottomInterface=r,c()(this,"interface",void 0)}return s()(t,[{key:"getContent",value:function(){return this.interface=document.createElement("section"),this.interface.classList.add("chat"),this.interface.style.display="none",this.interface.appendChild(this.topInterface.getContent()),this.interface.appendChild(this.messagesContainer.getContent()),this.interface.appendChild(this.bottomInterface.getContent()),this.interface}}]),t}(),me=new pe({sideInterface:new fe(re,oe,new de),dialogInterface:new ve(ae,new he,se),chatAvatarForm:Xt,userInfoFromChat:Kt,chatInfo:te,authApi:Ht,router:k,validation:new b(l,"#message"),errors:l,checkInputsOnFocusAndBlur:Et,form:"#message",path:v,sendMessageOnSubmit:function(t,e,n){var r=document.querySelector(e);r.addEventListener("submit",(function(e){if(e.preventDefault(),t.checkAllInputs()){var o=Array.from(r.querySelectorAll("input")).reduce((function(t,e){return t[e.name]=Ot(e.value),t}),{});n.send(JSON.stringify({content:o.text,type:"message"})),r.querySelector("input").value="",t.disableButton()}}))},userInfo:zt,chatApi:Wt,userApi:Jt});k.use("/auth",Gt).use("/reg",$t).use("/user-info",zt).use("/chat",me).use("/not-found",ee).use("/error",ne).use("/pass",Vt).use("/ava",Zt).use("/new-chat",Qt).use("/chat-avatar",Xt).use("/chat-users",Yt).use("/chat-info",te).use("/user-info-from-chat",Kt),k.start(),function(t,e,n){"/"===window.location.pathname||"/chat"===window.location.pathname?e.go("/chat"):Object.values(n).every((function(t){return window.location.pathname!==t}))?e.go("/not-found"):e.go(window.location.pathname)}(window.location.pathname,k,v)}]);